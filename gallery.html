<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Gallery â€¢ Grace Foundation International</title>

  <!-- Make sure this path is correct. With gfintl.org, use a ROOT-RELATIVE path: -->
  <link rel="stylesheet" href="/style.css">
</head>
<body>

  <!-- ===== SITE HEADER / NAV ===== -->
  <header class="site-header">
    <nav class="nav container">
      <a href="/">Home</a>
      <a href="/about.html">About Us</a>
      <a href="/projects.html">Projects</a>
      <a href="/partner.html">Partner With Us</a>
      <a href="/team.html">Meet Our Team</a>
      <a href="/gallery.html" aria-current="page">Gallery</a>
      <a href="/contact.html">Contact</a>
    </nav>
  </header>

  <!-- ===== MAIN ===== -->
  <main>
    <!-- ===== GALLERY SECTION ===== -->
    <section id="gallery" class="gal container">
      <header class="gal-header">
        <h1>Gallery</h1>
        <p>Browse our albums. Click an album to view all photos.</p>
      </header>

      <!-- Album grid -->
      <div class="gal-grid" role="list">
        <!-- Album: Education Outreach -->
        <button
          class="album-card"
          aria-label="Open Education Outreach album"
          data-album="education-outreach"
          data-title="Education Outreach"
          data-images="/assets/gallery/education1.jpg|/assets/gallery/education2.jpg"
          role="listitem"
        >
          <div class="album-thumb">
            <img src="/assets/gallery/education1.jpg" alt="Education Outreach cover" loading="lazy">
          </div>
          <div class="album-meta">
            <h3>Education Outreach</h3>
            <span class="count">2 photos</span>
          </div>
        </button>

        <!-- Starter Album: Green Dignity Villages -->
        <button
          class="album-card"
          aria-label="Open Green Dignity Villages album"
          data-album="green-dignity-villages"
          data-title="Green Dignity Villages"
          data-images="/assets/gallery/gdv1.jpg|/assets/gallery/gdv2.jpg"
          role="listitem"
        >
          <div class="album-thumb">
            <img src="/assets/gallery/gdv1.jpg" alt="Green Dignity Villages cover" loading="lazy">
          </div>
          <div class="album-meta">
            <h3>Green Dignity Villages</h3>
            <span class="count">2+ photos</span>
          </div>
        </button>

        <!-- Starter Album: Champions for Peaceful Community -->
        <button
          class="album-card"
          aria-label="Open Champions for Peaceful Community album"
          data-album="champions-for-peace"
          data-title="Champions for Peaceful Community"
          data-images="/assets/gallery/cpc1.jpg|/assets/gallery/cpc2.jpg"
          role="listitem"
        >
          <div class="album-thumb">
            <img src="/assets/gallery/cpc1.jpg" alt="Champions for Peaceful Community cover" loading="lazy">
          </div>
          <div class="album-meta">
            <h3>Champions for Peaceful Community</h3>
            <span class="count">2+ photos</span>
          </div>
        </button>

        <!-- Starter Album: Agriculture & Livelihoods -->
        <button
          class="album-card"
          aria-label="Open Agriculture & Livelihoods album"
          data-album="agriculture"
          data-title="Agriculture & Livelihoods"
          data-images="/assets/gallery/agri1.jpg|/assets/gallery/agri2.jpg"
          role="listitem"
        >
          <div class="album-thumb">
            <img src="/assets/gallery/agri1.jpg" alt="Agriculture & Livelihoods cover" loading="lazy">
          </div>
          <div class="album-meta">
            <h3>Agriculture & Livelihoods</h3>
            <span class="count">2+ photos</span>
          </div>
        </button>

        <!-- Starter Album: Health Outreach -->
        <button
          class="album-card"
          aria-label="Open Health Outreach album"
          data-album="health"
          data-title="Health Outreach"
          data-images="/assets/gallery/health1.jpg|/assets/gallery/health2.jpg"
          role="listitem"
        >
          <div class="album-thumb">
            <img src="/assets/gallery/health1.jpg" alt="Health Outreach cover" loading="lazy">
          </div>
          <div class="album-meta">
            <h3>Health Outreach</h3>
            <span class="count">2+ photos</span>
          </div>
        </button>

        <!-- Starter Album: Sports & Youth -->
        <button
          class="album-card"
          aria-label="Open Sports & Youth album"
          data-album="sports"
          data-title="Sports & Youth"
          data-images="/assets/gallery/sports1.jpg|/assets/gallery/sports2.jpg"
          role="listitem"
        >
          <div class="album-thumb">
            <img src="/assets/gallery/sports1.jpg" alt="Sports & Youth cover" loading="lazy">
          </div>
          <div class="album-meta">
            <h3>Sports & Youth</h3>
            <span class="count">2+ photos</span>
          </div>
        </button>
      </div>

      <!-- Lightbox / Viewer -->
      <div class="gal-viewer" aria-hidden="true" aria-label="Image viewer" role="dialog">
        <div class="viewer-backdrop" data-close></div>
        <div class="viewer-content" role="document">
          <header class="viewer-header">
            <h2 class="viewer-title">Album</h2>
            <button class="viewer-close" aria-label="Close viewer" title="Close" data-close>&times;</button>
          </header>
          <div class="viewer-stage">
            <img class="viewer-image" src="" alt="" />
          </div>
          <footer class="viewer-footer">
            <button class="viewer-prev" aria-label="Previous image">&larr; Prev</button>
            <span class="viewer-index" aria-live="polite">1 / 1</span>
            <button class="viewer-next" aria-label="Next image">Next &rarr;</button>
          </footer>
        </div>
      </div>
    </section>
  </main>

  <!-- ===== GALLERY JS (keep just before </body>) ===== -->
  <script>
  (function() {
    const qs  = (s, el=document) => el.querySelector(s);
    const qsa = (s, el=document) => Array.from(el.querySelectorAll(s));
    const viewer   = qs('.gal-viewer');
    const imgEl    = qs('.viewer-image', viewer);
    const titleEl  = qs('.viewer-title', viewer);
    const indexEl  = qs('.viewer-index', viewer);
    const prevBtn  = qs('.viewer-prev', viewer);
    const nextBtn  = qs('.viewer-next', viewer);

    let images = [];
    let i = 0;

    function openViewer(title, list) {
      images = list;
      i = 0;
      titleEl.textContent = title || 'Album';
      render();
      viewer.classList.add('open');
      viewer.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
    }

    function closeViewer() {
      viewer.classList.remove('open');
      viewer.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
    }

    function render() {
      if (!images.length) return;
      imgEl.src = images[i];
      imgEl.alt = titleEl.textContent + ' photo ' + (i+1);
      indexEl.textContent = (i+1) + ' / ' + images.length;
      imgEl.style.objectFit = 'contain'; // show whole people/faces
    }

    function next() { i = (i + 1) % images.length; render(); }
    function prev() { i = (i - 1 + images.length) % images.length; render(); }

    // Tolerant parser for data-images
    function parseImages(attr) {
      if (!attr) return [];
      return attr
        .split(/[|,]/)                       // allow '|' or ','
        .map(s => s.trim())
        .filter(Boolean)
        .filter(s => /\.(jpe?g|png|webp|gif|svg)$/i.test(s)); // keep only image-like URLs
    }

    qsa('.album-card').forEach(card => {
      card.addEventListener('click', () => {
        const title = card.getAttribute('data-title');
        const imgs  = parseImages(card.getAttribute('data-images'));
        if (imgs.length) {
          openViewer(title, imgs);
        } else {
          alert('No valid images found for this album. Please check data-images paths.');
        }
      });
    });

    viewer.addEventListener('click', (e) => {
      if (e.target.matches('[data-close], .viewer-backdrop')) closeViewer();
    });

    document.addEventListener('keydown', (e) => {
      if (!viewer.classList.contains('open')) return;
      if (e.key === 'Escape') closeViewer();
      if (e.key === 'ArrowRight') next();
      if (e.key === 'ArrowLeft') prev();
    });

    nextBtn.addEventListener('click', next);
    prevBtn.addEventListener('click', prev);
  })();
  </script>

</body>
</html>
