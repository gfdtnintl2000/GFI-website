<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PAGE TITLE — Grace Foundation International</title>
  <link rel="stylesheet" href="/style.css?v=20250905" />
  <!-- Optional:
  <link rel="icon" href="/assets/favicon.ico">
  -->
</head>

<body>
  <!-- Top navigation (maroon band styles will come from style.css we add later) -->
<!-- Header -->
<header class="site-header">
  <nav class="nav container">
    <a href="/">Home</a>
    <a href="/about.html">About Us</a>
    <a href="/projects.html">Projects</a>
    <a href="/partner.html">Partner With Us</a>
    <a href="/team.html">Meet Our Team</a>
    <a href="/gallery.html">Gallery</a>
    <a href="/contact.html">Contact</a>
  </nav>
</header>
<section class="page-heading">
  <div class="container">
    <h1>Gallery</h1>
    <p>A visual journey of our programs, community events, and impact stories.</p>
  </div>
</section>

 <section class="gallery">
  <div class="album-grid">
    <!-- Album: Education Outreach -->
    <button
      type="button"
      class="album-card"
      aria-label="Open Education Outreach album"
      data-album="education-outreach"
      data-title="Education Outreach"
      data-images="/assets/gallery/education1.jpg,/assets/gallery/education2.jpg"
    >
      <div class="album-thumb">
        <img src="/assets/gallery/education1.jpg" alt="Education Outreach" loading="lazy">
      </div>
      <div class="album-meta">
        <h3>Education Outreach</h3>
        <span class="count">2 photos</span>
      </div>
    </button>

    <!-- Duplicate this block for more albums; just change data-* and thumb src -->
    <!--
    <button type="button" class="album-card" data-album="agriculture"
      data-title="Sustainable Agriculture"
      data-images="/assets/gallery/agri1.jpg,/assets/gallery/agri2.jpg">
      <div class="album-thumb">
        <img src="/assets/gallery/agri1.jpg" alt="Sustainable Agriculture" loading="lazy">
      </div>
      <div class="album-meta">
        <h3>Sustainable Agriculture</h3>
        <span class="count">2+ photos</span>
      </div>
    </button>
    -->
  </div>
</section>

      </div>
      <!-- Lightbox Modal (single instance) -->
      <dialog id="lightbox" class="lightbox" aria-modal="true">
        <div class="lightbox-header">
          <h2 id="lightbox-title">Album</h2>
          <button id="lightbox-close" class="close" aria-label="Close">×</button>
        </div>
        <div class="lightbox-body">
          <button class="nav prev" aria-label="Previous">‹</button>
          <img id="lightbox-image" alt="Album image" />
          <button class="nav next" aria-label="Next">›</button>
        </div>
        <div class="lightbox-footer">
          <span id="lightbox-counter" class="counter">1 / 1</span>
        </div>
      </dialog>
    </section>
  </main>

  <!-- Footer (green ribbon styles will come from style.css we add later) -->

  <!-- Tiny helper + gallery logic loader -->
  <script>document.getElementById('year').textContent = new Date().getFullYear();</script>
  <script src="/assets/js/gallery.js" defer></script>
  <footer class="site-footer">
  <div class="container">
    © 2025 Grace Foundation International. All rights reserved.
  </div>
</footer>
  <!-- Lightbox Overlay -->
<div id="lightbox" class="lb hidden" aria-hidden="true" role="dialog" aria-label="Image viewer">
  <button class="lb-btn lb-close" aria-label="Close">×</button>
  <button class="lb-btn lb-prev" aria-label="Previous">‹</button>
  <img class="lb-img" alt="">
  <button class="lb-btn lb-next" aria-label="Next">›</button>
  <div class="lb-caption" aria-live="polite"></div>
</div>
<script>
(() => {
  const cards = document.querySelectorAll('.album-card');
  const lb = document.getElementById('lightbox');
  const imgEl = lb.querySelector('.lb-img');
  const captionEl = lb.querySelector('.lb-caption');
  const btnPrev = lb.querySelector('.lb-prev');
  const btnNext = lb.querySelector('.lb-next');
  const btnClose = lb.querySelector('.lb-close');

  let images = [];
  let index = 0;
  let title = '';

  function show(i) {
    index = (i + images.length) % images.length;
    const src = images[index];
    imgEl.src = src;
    imgEl.alt = title || 'Gallery image';
    captionEl.textContent = `${title} • ${index + 1} / ${images.length}`;
    // Preload neighbors
    [index - 1, index + 1].forEach(j => {
      const n = (j + images.length) % images.length;
      const pre = new Image(); pre.src = images[n];
    });
  }

  function openLightbox(arr, t) {
    images = arr;
    title = t || '';
    lb.classList.remove('hidden');
    lb.setAttribute('aria-hidden', 'false');
    document.body.style.overflow = 'hidden';
    show(0);
  }

  function closeLightbox() {
    lb.classList.add('hidden');
    lb.setAttribute('aria-hidden', 'true');
    document.body.style.overflow = '';
    imgEl.src = '';
  }

  // Open on album-card click
  cards.forEach(card => {
    card.addEventListener('click', (e) => {
      e.preventDefault();
      const list = (card.getAttribute('data-images') || '')
        .split(',')
        .map(s => s.trim())
        .filter(Boolean);
      if (!list.length) return;
      const t = card.getAttribute('data-title') || '';
      openLightbox(list, t);
    });
  });

  // Buttons
  btnPrev.addEventListener('click', () => show(index - 1));
  btnNext.addEventListener('click', () => show(index + 1));
  btnClose.addEventListener('click', closeLightbox);

  // Close on backdrop click
  lb.addEventListener('click', (e) => {
    if (e.target === lb) closeLightbox();
  });

  // Keyboard controls
  document.addEventListener('keydown', (e) => {
    if (lb.classList.contains('hidden')) return;
    if (e.key === 'Escape')      closeLightbox();
    if (e.key === 'ArrowRight')  show(index + 1);
    if (e.key === 'ArrowLeft')   show(index - 1);
  });

  // ===== Swipe support (touch) =====
  let tStartX = 0, tStartY = 0, tTime = 0;

  // Use non-passive so we can prevent scroll on horizontal swipes
  lb.addEventListener('touchstart', (e) => {
    if (e.touches.length !== 1) return;
    tStartX = e.touches[0].clientX;
    tStartY = e.touches[0].clientY;
    tTime = Date.now();
  }, { passive: true });

  lb.addEventListener('touchmove', (e) => {
    if (e.touches.length !== 1) return;
    const dx = e.touches[0].clientX - tStartX;
    const dy = e.touches[0].clientY - tStartY;
    // If horizontal intent, prevent the page from panning
    if (Math.abs(dx) > Math.abs(dy)) e.preventDefault();
  }, { passive: false });

  lb.addEventListener('touchend', (e) => {
    const touch = e.changedTouches && e.changedTouches[0];
    if (!touch) return;
    const dx = touch.clientX - tStartX;
    const dy = touch.clientY - tStartY;
    const dt = Date.now() - tTime;

    const distThresh = 45;     // px
    const fastTime    = 300;   // ms (optional speed bias)

    // Horizontal swipe = next/prev
    if (Math.abs(dx) > Math.abs(dy) && (Math.abs(dx) > distThresh || (Math.abs(dx) > 25 && dt < fastTime))) {
      if (dx < 0) show(index + 1); else show(index - 1);
      return;
    }

    // Vertical swipe down = close
    if (dy > distThresh) {
      closeLightbox();
    }
  }, { passive: true });
})();
</script>

</body>
</html>
