<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gallery • Grace Foundation International</title>
<link rel="stylesheet" href="/style.css">

</head>
<body>
  <!-- SITE HEADER (paste at top of gallery.html and partner.html, right after <body>) -->
<header class="site-header">
  <nav class="nav container">
    <a href="/">Home</a>
    <a href="/about.html">About Us</a>
    <a href="/projects.html">Projects</a>
    <a href="/partner.html">Partner With Us</a>
    <a href="/team.html">Meet Our Team</a>
    <a href="/gallery.html" aria-current="page">Gallery</a>
    <a href="/contact.html">Contact</a>
  </nav>
</header>

<section id="gallery" class="gal">
  <div class="container">
    <h1 class="gal-title">Gallery</h1>
    <p class="gal-subtitle">Moments from our work with communities in Kenya</p>

    <div class="gal-grid">
      <figure class="gal-item">
        <img src="/assets/gallery/education1.jpg" alt=>
         <img src="/assets/gallery/education2.jpg" alt=>
        <figcaption>Education Outreach</figcaption>
      </figure>

      <figure class="gal-item">
        <img src="/assets/gallery/health-camp-01.jpg" alt=>
        <figcaption>Mobile Health Camp</figcaption>
      </figure>

      <figure class="gal-item">
        <img src="/assets/gallery/avocado-farmers-01.jpg" alt=>
        <figcaption>Farmer Training</figcaption>
      </figure>

      <figure class="gal-item">
        <img src="/assets/gallery/sports-program-01.jpg" alt=>
        <figcaption>Sports for Peace</figcaption>
      </figure>

      <figure class="gal-item">
        <img src="/assets/gallery/green-dignity-01.jpg" alt=>
        <figcaption>Green Dignity Villages</figcaption>
      </figure>
    </div>
  </div>
</section>
  
      </div>
    </div>
  </section>

  <footer class="site-footer">
    <div class="container footer-ribbon">© 2025 Grace Foundation International. All Rights Reserved </div>
  </footer>

  <!-- Lightbox overlay (only used if/when an image successfully loads) -->
  <div class="lightbox-overlay" id="lightbox" hidden>
    <img alt="">
  </div>

  <script>
    // Try to auto-resolve real image URLs by testing common folders & extensions.
    // This avoids 404s when you’re unsure whether it’s /assets/, /images/, etc.,
    // and whether it's .jpg/.JPG/.jpeg/.png/.webp

    const CANDIDATE_DIRS = [
      "assets/gallery/", "assets/images/", "assets/",
      "images/", "/assets/gallery/", "/assets/images/", "/assets/", "/images/"
    ];
    const CANDIDATE_EXTS = [".jpg", ".JPG", ".jpeg", ".png", ".webp"];

    function resolveImageForItem(figure) {
      const img = figure.querySelector("img");
      const name = figure.dataset.name;                 // e.g., "photo1"
      const exact = figure.dataset.exact?.trim();       // exact known URL (optional)

      // If an exact URL is provided, try it first and only.
      const queue = exact
        ? [exact]
        : CANDIDATE_DIRS.flatMap(d => CANDIDATE_EXTS.map(ext => d + name + ext));

      // Try each candidate until one loads.
      let resolved = null;

      const tryNext = () => {
        if (!queue.length) {
          // Mark as missing
          figure.classList.add("gal-missing");
          img.removeAttribute("src");
          console.warn("Image not found for:", name);
          return;
        }
        const candidate = queue.shift();

        const tester = new Image();
        tester.onload = () => {
          resolved = candidate;
          img.src = resolved;
          figure.classList.add("gal-loaded");
          enableLightbox(figure, resolved);
        };
        tester.onerror = tryNext;
        tester.src = candidate;
      };

      tryNext();
    }

    function enableLightbox(figure, url) {
      // Click to open large view only when image truly exists; no broken links.
      figure.style.cursor = "zoom-in";
      figure.addEventListener("click", () => openLightbox(url), { once: true });
    }

    function openLightbox(url) {
      const overlay = document.getElementById("lightbox");
      const overlayImg = overlay.querySelector("img");
      overlayImg.src = url;
      overlay.hidden = false;

      const close = () => {
        overlay.hidden = true;
        overlayImg.removeAttribute("src");
        overlay.removeEventListener("click", close);
        document.removeEventListener("keydown", onEsc);
      };
      const onEsc = (e) => { if (e.key === "Escape") close(); };

      overlay.addEventListener("click", close);
      document.addEventListener("keydown", onEsc);
    }

    // Resolve all items on load
    document.addEventListener("DOMContentLoaded", () => {
      document.querySelectorAll(".gal-item").forEach(resolveImageForItem);
    });
  </script>
</body>
</html>
