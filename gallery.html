<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PAGE TITLE — Grace Foundation International</title>
 <link rel="stylesheet" href="/style.css?v=20250905e">
  <!-- Optional:
  <link rel="icon" href="/assets/favicon.ico">
  -->
</head>

<body>
  <!-- Top navigation (maroon band styles will come from style.css we add later) -->
<!-- Header -->
<header class="site-header">
  <nav class="nav container">
    <a href="/">Home</a>
    <a href="/about.html">About Us</a>
    <a href="/projects.html">Projects</a>
    <a href="/partner.html">Partner With Us</a>
    <a href="/team.html">Meet Our Team</a>
    <a href="/gallery.html">Gallery</a>
    <a href="/contact.html">Contact</a>
  </nav>
</header>
<section class="page-heading">
  <div class="container">
    <h1>Gallery</h1>
    <p>A visual journey of our programs, community events, and impact stories.</p>
  </div>
</section>
<body class="page-gallery">
  <!-- Header -->
  <header class="site-header">…</header>

  <!-- Page heading ribbon -->
  <section class="page-heading">…</section>

  <!-- Main content -->
 <main class="container">
  <h1>Gallery</h1>
  <p class="muted">Tap any photo to open full size.</p>

  <section class="gallery-lite">
    <!-- Education Outreach -->
    <figure>
      <a href="/assets/gallery/education1.jpg">
        <img src="/assets/gallery/education1.jpg?v=20250905" alt="Education Outreach 1" loading="lazy">
      </a>
      <figcaption><em>GFI Founder presents an electric wheelchair to Olivia Cheptoo of Mogonjet Sec. School courtesy of Lift the Lid.</em></figcaption>
    </figure>

    <figure>
      <a href="/assets/gallery/education2.jpg">
        <img src="/assets/gallery/education2.jpg?v=20250905" alt="Education Outreach 2" loading="lazy">
      </a>
      <figcaption><em>Education Outreach in action.</em></figcaption>
    </figure>

    <!-- To add more photos later, copy a <figure> block and change the filename & caption -->
  </section>
</main>

  <!-- Footer (green ribbon styles will come from style.css we add later) -->

  <!-- Tiny helper + gallery logic loader -->
  <script>document.getElementById('year').textContent = new Date().getFullYear();</script>
  <script src="/assets/js/gallery.js" defer></script>
  <footer class="site-footer">
  <div class="container">
    © 2025 Grace Foundation International. All rights reserved.
  </div>
</footer>
  <!-- Lightbox Overlay -->
<div id="lightbox" class="lb hidden" aria-hidden="true" role="dialog" aria-label="Image viewer">
  <button class="lb-btn lb-close" aria-label="Close">×</button>
  <button class="lb-btn lb-prev" aria-label="Previous">‹</button>
  <img class="lb-img" alt="">
  <button class="lb-btn lb-next" aria-label="Next">›</button>
  <div class="lb-caption" aria-live="polite"></div>
</div>
  <div id="lightbox" class="lb hidden" aria-hidden="true" role="dialog" aria-label="Image viewer">
  <button class="lb-btn lb-close" aria-label="Close">×</button>
  <button class="lb-btn lb-prev"  aria-label="Previous">‹</button>
  <img class="lb-img" alt="">
  <button class="lb-btn lb-next"  aria-label="Next">›</button>
  <div class="lb-caption" aria-live="polite"></div>
</div>

<script>
(() => {
  const cards = document.querySelectorAll('.album-card');
  const lb = document.getElementById('lightbox');
  const imgEl = lb.querySelector('.lb-img');
  const captionEl = lb.querySelector('.lb-caption');
  const btnPrev = lb.querySelector('.lb-prev');
  const btnNext = lb.querySelector('.lb-next');
  const btnClose = lb.querySelector('.lb-close');

  let images = [];
  let index = 0;
  let title = '';

  function show(i) {
    index = (i + images.length) % images.length;
    const src = images[index];
    imgEl.src = src;
    imgEl.alt = title || 'Gallery image';
    captionEl.textContent = `${title} • ${index + 1} / ${images.length}`;
    // Preload neighbors
    [index - 1, index + 1].forEach(j => {
      const n = (j + images.length) % images.length;
      const pre = new Image(); pre.src = images[n];
    });
  }

  function openLightbox(arr, t) {
    images = arr;
    title = t || '';
    lb.classList.remove('hidden');
    lb.setAttribute('aria-hidden', 'false');
    document.body.style.overflow = 'hidden';
    show(0);
  }

  function closeLightbox() {
    lb.classList.add('hidden');
    lb.setAttribute('aria-hidden', 'true');
    document.body.style.overflow = '';
    imgEl.src = '';
  }

  // Open on album-card click
  cards.forEach(card => {
    card.addEventListener('click', (e) => {
      e.preventDefault();
      const list = (card.getAttribute('data-images') || '')
        .split(',')
        .map(s => s.trim())
        .filter(Boolean);
      if (!list.length) return;
      const t = card.getAttribute('data-title') || '';
      openLightbox(list, t);
    });
  });

  // Buttons
  btnPrev.addEventListener('click', () => show(index - 1));
  btnNext.addEventListener('click', () => show(index + 1));
  btnClose.addEventListener('click', closeLightbox);

  // Close on backdrop click
  lb.addEventListener('click', (e) => {
    if (e.target === lb) closeLightbox();
  });

  // Keyboard controls
  document.addEventListener('keydown', (e) => {
    if (lb.classList.contains('hidden')) return;
    if (e.key === 'Escape')      closeLightbox();
    if (e.key === 'ArrowRight')  show(index + 1);
    if (e.key === 'ArrowLeft')   show(index - 1);
  });

  // ===== Swipe support (touch) =====
  let tStartX = 0, tStartY = 0, tTime = 0;

  // Use non-passive so we can prevent scroll on horizontal swipes
  lb.addEventListener('touchstart', (e) => {
    if (e.touches.length !== 1) return;
    tStartX = e.touches[0].clientX;
    tStartY = e.touches[0].clientY;
    tTime = Date.now();
  }, { passive: true });

  lb.addEventListener('touchmove', (e) => {
    if (e.touches.length !== 1) return;
    const dx = e.touches[0].clientX - tStartX;
    const dy = e.touches[0].clientY - tStartY;
    // If horizontal intent, prevent the page from panning
    if (Math.abs(dx) > Math.abs(dy)) e.preventDefault();
  }, { passive: false });

  lb.addEventListener('touchend', (e) => {
    const touch = e.changedTouches && e.changedTouches[0];
    if (!touch) return;
    const dx = touch.clientX - tStartX;
    const dy = touch.clientY - tStartY;
    const dt = Date.now() - tTime;

    const distThresh = 45;     // px
    const fastTime    = 300;   // ms (optional speed bias)

    // Horizontal swipe = next/prev
    if (Math.abs(dx) > Math.abs(dy) && (Math.abs(dx) > distThresh || (Math.abs(dx) > 25 && dt < fastTime))) {
      if (dx < 0) show(index + 1); else show(index - 1);
      return;
    }

    // Vertical swipe down = close
    if (dy > distThresh) {
      closeLightbox();
    }
  }, { passive: true });
})();
</script>
<script>
(function () {
  // Overlay structure expected in the page:
  // <div id="albumOverlay" hidden>
  //   <button class="close">×</button>
  //   <button class="prev">‹</button>
  //   <img alt="">
  //   <button class="next">›</button>
  //   <div class="count"><span class="i">1</span> / <span class="n">1</span></div>
  // </div>

  const overlay = document.getElementById('albumOverlay') || (function createOverlay(){
    const o = document.createElement('div');
    o.id = 'albumOverlay'; o.className = 'lightbox'; o.hidden = true;
    o.innerHTML = `
      <button class="close" aria-label="Close">×</button>
      <button class="prev" aria-label="Previous">‹</button>
      <img alt="">
      <button class="next" aria-label="Next">›</button>
      <div class="count"><span class="i">1</span> / <span class="n">1</span></div>
    `;
    document.body.appendChild(o);
    return o;
  })();

  const imgEl = overlay.querySelector('img');
  const closeBtn = overlay.querySelector('.close');
  const prevBtn  = overlay.querySelector('.prev');
  const nextBtn  = overlay.querySelector('.next');
  const iSpan    = overlay.querySelector('.count .i');
  const nSpan    = overlay.querySelector('.count .n');

  let images = [];
  let idx = 0;

  function show(i) {
    if (!images.length) return;
    idx = (i + images.length) % images.length;
    imgEl.src = images[idx];
    iSpan.textContent = String(idx + 1);
    nSpan.textContent = String(images.length);
    overlay.hidden = false;
  }

  function parseImages(val) {
    return (val || '')
      .split(',')
      .map(s => s.trim())
      .filter(Boolean);
  }

  document.addEventListener('click', (e) => {
    const card = e.target.closest('.album-card');
    if (!card) return;
    images = parseImages(card.getAttribute('data-images'));
    if (!images.length) { alert('No images found for this album.'); return; }
    show(0);
  });

  closeBtn.addEventListener('click', () => overlay.hidden = true);
  prevBtn .addEventListener('click', () => show(idx - 1));
  nextBtn .addEventListener('click', () => show(idx + 1));

  // Close on ESC / click outside image
  document.addEventListener('keydown', e => { if (e.key === 'Escape') overlay.hidden = true; });
  overlay.addEventListener('click', e => { if (e.target === overlay) overlay.hidden = true; });
})();
</script>

</body>
</html>
